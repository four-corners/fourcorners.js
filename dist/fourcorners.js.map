{"version":3,"file":"fourcorners.js","mappings":"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","sources":["webpack://FourCorners/./src/index.js","webpack://FourCorners/webpack/bootstrap","webpack://FourCorners/webpack/before-startup","webpack://FourCorners/webpack/startup","webpack://FourCorners/webpack/after-startup"],"sourcesContent":["// import \"regenerator-runtime/runtime\";\n// import \"./styles.scss\";\n\nclass FourCorners {\n\n\tconstructor(img, provenance, opts) {\n\t\t// this.elems = {\n\t\t// \twrap: wrap\n\t\t// };\n\t\t// this.opts = opts;\n\t\t// const data = parseData(this);\n\t\t// this.strings = {};\n\t\t// this.onImgLoad = new Event(\"onImgLoad\");\n\t\t// this.onImgFail = new Event(\"onImgFail\");\n\t\t// this.initModule();\n\t\tthis.provenance = provenance;\n\n\t\tthis.c2paData = this.getC2paData();\n\t\tthis.data = this.parseData();\n\t\t// console.log(this.data);\n\t\t\n\n\n\t\t// this.lang = data && data.lang ? data.lang : \"en\";\n\t\tthis.strings = STRINGS[`en`];\n\t\t// this.photo = getPhoto(this, data);\n\t\tthis.opts = Object.assign(DEFAULT_OPTS, opts);\n\t\t// this.opts = data ? Object.assign(this.opts, data.opts) : {};\n\t\t// this.content = {\n\t\t// \tauthorship: data ? data.authorship : {},\n\t\t// \tbackstory: data ? data.backstory : {},\n\t\t// \timagery: data ? data.imagery : {},\n\t\t// \tlinks: data ? data.links : {},\n\t\t// };\n\t\tthis.elems = {};\n\t\tthis.elems.img = img;\n\t\tthis.elems.wrap = this.addWrap();\n\t\tthis.elems.panels = this.addPanels();\n\t\tthis.elems.corners = this.addCorners();\n\t\t// this.elems.media = this.wrapMedia();\n\t\t// this.elems.cutline = this.addCutline();\n\n\t\t// const self = this;\n\t\t// Object.keys(this.elems.corners).forEach(function(cornerKey, i) {\n\t\t// \tlet cornerElem = self.elems.corners[cornerKey];\n\t\t// \tif(self.opts.static || cornerElem.classList.contains(\"fc-interactive\")) {\n\t\t// \t\treturn;\n\t\t// \t}\n\t\t// \tcornerElem.addEventListener(\"mouseenter\", self.hoverCorner.bind(self) );\n\t\t// \tcornerElem.addEventListener(\"mouseleave\", self.unhoverCorner.bind(self) );\n\t\t// \tcornerElem.addEventListener(\"click\", self.clickCorner.bind(self) );\n\t\t// \tcornerElem.classList.add(\"fc-interactive\");\n\t\t// });\n\t}\n\n\tgetValue(key) {\n\t\tlet value;\n\t\tconst searchKeys = (obj, key) => {\n\t\t\tif(typeof obj !== \"object\") return;\n\t\t\tObject.keys(obj).forEach(k => {\n\t\t\t\tif(k === key) {\n\t\t\t\t\treturn value = obj[k];\n\t\t\t\t}\n\t\t\t\tif(typeof obj[k] === \"object\") {\n\t\t\t\t\treturn searchKeys(obj[k], key);\n\t\t\t\t}\n\t\t\t});\n\t \t}\n\t \tsearchKeys(this.c2paData, key);\n\t \treturn value;\n\t}\n\n\tgetC2paData() {\n\t\tlet c2paData;\n\t\tif(this.provenance) {\n\t\t\tthis.provenance.claims.forEach((claim, key) => {\n\t\t\t\tc2paData = claim.assertions.get(\"org.fourcorners.context\").data;\n\t\t\t});\n\t\t}\n\t\treturn c2paData;\n\t}\n\n\tparseData() {\n\n\t\t// const data = {\n\t\t// \t\"authorship\": {\n\t\t// \t\t\"caption\": c2paData[\"fourcorners:authorship\"][\"fourcorners:authorshipCaption\"],\n\t\t// \t\t\"credit\": c2paData[\"fourcorners:authorship\"][\"fourcorners:authorshipCredit\"],\n\t\t// \t\t\"license\": {\n\t\t// \t\t\t\"type\": c2paData[\"fourcorners:authorship\"][\"fourcorners:license\"][\"fourcorners:authorshipLicenseType\"],\n\t\t// \t\t\t\"year\": c2paData[\"fourcorners:authorship\"][\"fourcorners:license\"][\"fourcorners:authorshipLicenseYear\"],\n\t\t// \t\t\t\"holder\": c2paData[\"fourcorners:authorship\"][\"fourcorners:license\"][\"fourcorners:authorshipLicenseHolder\"],\n\t\t// \t\t\t\"label\": c2paData[\"fourcorners:authorship\"][\"fourcorners:license\"][\"fourcorners:authorshipLicenseLabel\"],\n\t\t// \t\t\t\"desc\": c2paData[\"fourcorners:authorship\"][\"fourcorners:license\"][\"fourcorners:authorshipLicenseDesc\"],\n\t\t// \t\t\t\"url\": c2paData[\"fourcorners:authorship\"][\"fourcorners:license\"][\"fourcorners:authorshipLicenseUrl\"],\n\t\t// \t\t},\n\t\t// \t\t\"ethics\": {\n\t\t// \t\t\t\"label\": c2paData[\"fourcorners:authorship\"][\"fourcorners:authorshipEthics\"][\"fourcorners:authorshipEthicsLabel\"],\n\t\t// \t\t\t\"description\": c2paData[\"fourcorners:authorship\"][\"fourcorners:authorshipEthics\"][\"fourcorners:authorshipEthicsDescription\"],\n\t\t// \t\t},\n\t\t// \t\t\"bio\": c2paData[\"fourcorners:authorship\"][\"fourcorners:authorshipBio\"],\n\t\t// \t\t\"website\": c2paData[\"fourcorners:authorship\"][\"fourcorners:authorshipWebsite\"],\n\t\t// \t\t\"contactInfo\": c2paData[\"fourcorners:authorship\"][\"fourcorners:authorshipContactInfo\"],\n\t\t// \t\t\"contactRights\": c2paData[\"fourcorners:authorship\"][\"fourcorners:authorshipContactRights\"],\n\t\t// \t},\n\t\t// \t\"backstory\": {\n\t\t// \t\t\"text\": c2paData[\"fourcorners:backstory\"][\"fourcorners:backstoryText\"],\n\t\t// \t\t\"media\": c2paData[\"fourcorners:backstory\"][\"fourcorners:backstoryMedia\"],\n\t\t// \t},\n\t\t// \t\"imagery\": {\n\t\t// \t\t\"media\": c2paData[\"fourcorners:imagery\"][\"fourcorners:imageryMedia\"],\n\t\t// \t},\n\t\t// \t\"links\": {\n\t\t// \t\t\"links\": c2paData[\"fourcorners:links\"][\"fourcorners:linksLinks\"],\n\t\t// \t}\n\t\t// };\n\n\t\tconst parseArray = (arr) => {\n\t\t\tif(arr) {\n\t\t\t\tarr = arr.map((obj) => {\n\t\t\t\t\tconst newObj = {};\n\t\t\t\t\tconst keys = Object.keys(obj).map((k, i) => {\n\t\t\t\t\t\tconst splitArr = k.replace(\"fourcorners:\",\"\").split(/(?=[A-Z])/);\n\t\t\t\t\t\tconst newKey = splitArr[splitArr.length - 1].toLowerCase();\n\t\t\t\t\t\tnewObj[newKey] = obj[k];\n\t\t\t\t\t});\n\t\t\t\t\treturn newObj;\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn arr;\n\t\t};\n\n\t\tconst data = {\n\t\t\t\"authorship\": {\n\t\t\t\t\"caption\": this.getValue(\"fourcorners:authorshipCaption\"),\n\t\t\t\t\"credit\": this.getValue(\"fourcorners:authorshipCredit\"),\n\t\t\t\t\"license\": {\n\t\t\t\t\t\"type\": this.getValue(\"fourcorners:authorshipLicenseType\"),\n\t\t\t\t\t\"year\": this.getValue(\"fourcorners:authorshipLicenseYear\"),\n\t\t\t\t\t\"holder\": this.getValue(\"fourcorners:authorshipLicenseHolder\"),\n\t\t\t\t\t\"label\": this.getValue(\"fourcorners:authorshipLicenseLabel\"),\n\t\t\t\t\t\"desc\": this.getValue(\"fourcorners:authorshipLicenseDesc\"),\n\t\t\t\t\t\"url\": this.getValue(\"fourcorners:authorshipLicenseUrl\"),\n\t\t\t\t},\n\t\t\t\t\"ethics\": {\n\t\t\t\t\t\"label\": this.getValue(\"fourcorners:authorshipEthicsLabel\"),\n\t\t\t\t\t\"description\": this.getValue(\"fourcorners:authorshipEthicsDescription\"),\n\t\t\t\t},\n\t\t\t\t\"bio\": this.getValue(\"fourcorners:authorshipBio\"),\n\t\t\t\t\"website\": this.getValue(\"fourcorners:authorshipWebsite\"),\n\t\t\t\t\"contactInfo\": this.getValue(\"fourcorners:authorshipContactInfo\"),\n\t\t\t\t\"contactRights\": this.getValue(\"fourcorners:authorshipContactRights\"),\n\t\t\t},\n\t\t\t\"backstory\": {\n\t\t\t\t\"text\": this.getValue(\"fourcorners:backstoryText\"),\n\t\t\t\t\"media\": parseArray(this.getValue(\"fourcorners:backstoryMedia\")),\n\t\t\t},\n\t\t\t\"imagery\": {\n\t\t\t\t\"media\": parseArray(this.getValue(\"fourcorners:imageryMedia\")),\n\t\t\t},\n\t\t\t\"links\": {\n\t\t\t\t\"links\": parseArray(this.getValue(\"fourcorners:linksLinks\")),\n\t\t\t}\n\t\t};\n\n\t\treturn data;\n\n\t\t// // const loopKeys = (obj, newData) => {\n\t\t// // \tlet arr = [];\n\t\t// // \tif(typeof obj === \"object\") {\n\t\t// // \t\tarr = Object.keys(obj);\n\t\t// // \t} else if(typeof obj === \"array\") {\n\t\t// // \t\tarr = obj;\n\t\t// // \t} else {\n\t\t// // \t\treturn;\n\t\t// // \t}\n\t\t\t\n\t\t// // \tarr.forEach(k => {\n\t\t// // \t\tif(k.includes(\"fourcorners\")) {\n\t\t// // \t\t\tconst keys = k.replace(\"fourcorners:\",\"\").split(/(?=[A-Z])/);\n\t\t// // \t\t\tconsole.log(keys);\n\t\t// // \t\t\tkeys.forEach(k2 => {\n\t\t// // \t\t\t\tk2 = k2.charAt(0).toLowerCase() + k2.slice(1);\n\t\t// // \t\t\t\tif(!newData.hasOwnProperty(keys[0])) {\n\t\t// // \t\t\t\t\tnewData[k2] = obj[k];\n\t\t// // \t\t\t\t\tconsole.log(obj[k], newData);\n\t\t// // \t\t\t\t\t// loopKeys(obj[k], newData);\n\t\t// // \t\t\t\t}\n\t\t// // \t\t\t});\n\t\t\t\t\t\n\t\t// // \t\t\t// if(k) {\n\t\t// // \t\t\t// \treturn value = obj[k];\n\t\t// // \t\t\t// }\n\t\t// // \t\t\t// if(typeof obj[k] === \"object\") {\n\t\t// // \t\t\t// \treturn loopKeys(obj[k], newData);\n\t\t// // \t\t\t// }\n\t\t// // \t\t} else {\n\t\t// // \t\t\treturn newData;\n\t\t// // \t\t}\n\t\t// // \t});\n\t\t// // \treturn newData;\n\t\t// // \tconsole.log(newData);\n\t // \t}\n\n\t \n\n\t\treturn data;\n\t}\n\n\taddWrap() {\n\t\tconst wrap = document.createElement(\"div\");\n\t\tthis.elems.img.parentNode.insertBefore(wrap, this.elems.img);\n\t\twrap.appendChild(this.elems.img);\n\t\twrap.classList.add(\"fc-embed\");\n\t\treturn wrap;\n\t}\n\n\t// setUpData(data) {\n\t\n\n\t// \treturn this;\n\t// }\n\n\n\t// initModule() {\n\t// \tconst self = this,\n\t// \t\t\t\twrap = this.elems.wrap;\n\t// \twrap.classList.add(\"fc-init\");\n\t// \tif(this.opts.dark) {\n\t// \t\twrap.classList.add(\"fc-dark\");\n\t// \t}\n\t// \tif(this.opts.static) {\n\t// \t\twrap.classList.add(\"fc-static\");\n\t// \t} else {\n\t// \t\twrap.addEventListener(\"click\", function(e) {\n\t// \t\t\tconst onPanels = isChildOf(e.target, self.getPanel());\n\t// \t\t\tconst onCorners = isChildOf(e.target, self.elems.corners);\n\t// \t\t\tconst inCreator = isChildOf(e.target, Array.from(document.querySelectorAll(\"#creator\")));\n\t// \t\t\tif(!onPanels && !onCorners && !inCreator) {\n\t// \t\t\t\tself.closePanel();\n\t// \t\t\t\tself.elems.wrap.classList.remove(\"fc-full\");\n\t// \t\t\t}\n\t// \t\t});\n\t// \t}\n\t// \twrap.lang = this.lang;\n\t// \tif([\"ar\"].includes(this.lang)) {\n\t// \t\twrap.dir = \"rtl\";\n\t// \t} else {\n\t// \t\twrap.dir = \"ltr\";\n\t// \t}\n\n\t// \twindow.addEventListener(\"resize\", this.resizeModule.bind(this));\n\t// \tthis.resizeModule();\n\t// }\n\n\t// updateModule(data) {\n\t// \tif(!data) {\n\t// \t\tconst data = parseData(this);\n\t// \t}\n\t// \tthis.setUpData(data);\n\t// \tthis.initModule();\n\t// \treturn this;\n\t// }\n\n\tgetPanel(cornerKey) {\n\t\tconst { wrap } = this.elems;\n\t\treturn wrap.querySelector(`.fc-panel[data-fc-key=\"${cornerKey}\"]`);\n\t}\n\n\topenPanel(cornerKey) {\n\t\tconst self = this,\n\t\t\t\t\t{ elems } = this,\n\t\t\t\t\t{ wrap, corners, panels } = elems,\n\t\t\t\t\tcorner = elems.corners[cornerKey],\n\t\t\t\t\tpanel = this.getPanel(cornerKey);\n\t\t\n\t\twrap.classList.remove(\"fc-full\");\n\t\twrap.classList.add(\"fc-active\");\n\t\twrap.setAttribute(\"data-fc-active\", cornerKey);\n\t\tcorner.classList.add(\"fc-active\");\n\t\tpanel.classList.add(\"fc-active\");\n\t\tCORNER_KEYS.forEach(key => {\n\t\t\tif(key !== cornerKey) self.closePanel(key);\n\t\t});\n\t}\n\n\tclosePanel(cornerKey) {\n\t\tconst self = this,\n\t\t\t\t\t{ elems } = this,\n\t\t\t\t\t{ wrap, corners, panels } = elems,\n\t\t\t\t\tcorner = corners[cornerKey],\n\t\t\t\t\tpanel = this.getPanel(cornerKey);\n\t\t\n\t\twrap.classList.remove(\"fc-full\", \"fc-active\");\n\t\twrap.setAttribute(\"data-fc-active\", \"\");\n\t\tcorner.classList.remove(\"fc-active\");\n\t\tpanel.classList.remove(\"fc-active\");\n\t}\n\n\t// toggleExpandPanel() {\n\t// \tconst self = this;\n\t// \tself.elems.wrap.classList.toggle(\"fc-full\");\n\t// }\n\n\thoverCorner(e) {\n\t\tlet cornerElem = e.target;\n\t\tcornerElem.classList.add(\"fc-hover\");\n\t}\n\n\tunhoverCorner(e) {\n\t\tlet cornerElem = e.target;\n\t\tcornerElem.classList.remove(\"fc-hover\");\n\t}\n\n\tclickCorner(e) {\n\t\tconst cornerElem = e.target,\n\t\t\t\t\tcornerKey = cornerElem.getAttribute(\"data-fc-key\"),\n\t\t\t\t\tactiveKey = this.elems.wrap.getAttribute(\"data-fc-active\");\n\n\t\tif(cornerKey === activeKey) {\n\t\t\tthis.closePanel(cornerKey);\t\n\t\t} else {\n\t\t\tthis.openPanel(cornerKey);\n\t\t}\t\n\t}\n\n\taddCorners() {\n\t\tconst self = this,\n\t\t\t\t\tcorners = {},\n\t\t\t\t\t{ data, elems } = this,\n\t\t\t\t\t{ wrap } = elems;\n\n\t\tCORNER_KEYS.forEach(cornerKey => {\n\t\t\tconst cornerTitle = strings[cornerKey] || null,\n\t\t\t\t\t\tcornerElem = wrap.querySelector(`.fc-corner[data-fc-key=\"${cornerKey}\"]`) || document.createElement(\"div\"),\n\t\t\t\t\t\tpropKey = `fourcorners:${cornerKey}`;\n\n\t\t\tcornerElem.setAttribute(\"data-fc-key\", cornerKey);\n\t\t\tcornerElem.title = `View ${cornerTitle}`;\n\t\t\tcornerElem.classList.add(\"fc-corner\", `fc-${cornerKey}`);\n\n\t\t\tconst cornerIsEmpty = function() {\n\t\t\t\tif(data.hasOwnProperty(propKey)) {\n\t\t\t\t\tif(Object.keys(data[propKey]).length) return false;\t\n\t\t\t\t\treturn true;\n\t\t\t\t}\telse {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}();\n\n\t\t\tif(cornerIsEmpty) {\n\t\t\t\tcornerElem.classList.add(\"fc-empty\");\n\t\t\t}\n\n\t\t\twrap.appendChild(cornerElem);\n\t\t\tcornerElem.addEventListener(\"mouseenter\", self.hoverCorner.bind(self) );\n\t\t\tcornerElem.addEventListener(\"mouseleave\", self.unhoverCorner.bind(self) );\n\t\t\tcornerElem.addEventListener(\"click\", self.clickCorner.bind(self) );\n\t\t\tcornerElem.classList.add(\"fc-interactive\");\n\n\t\t\tcorners[cornerKey] = cornerElem;\n\t\t});\n\n\t\treturn corners;\n\t}\n\n\taddPanels() {\t\n\t\tconst self = this,\n\t\t\t\t\t{ data, strings, elems } = this,\n\t\t\t\t\t{ wrap } = elems,\n\t\t\t\t\tpanels = {};\n\n\t\tCORNER_KEYS.forEach(cornerKey => {\n\t\t\tconsole.log({data, cornerKey});\n\t\t\tconst cornerTitle = strings[cornerKey] || null,\n\t\t\t\t\t\tpanelData = data[cornerKey];\n\n\t\t\tlet panelInner = \"\";\n\n\t\t\tswitch(cornerKey) {\n\t\t\t\tcase \"authorship\":\n\t\t\t\t\tpanelInner = self.buildAuthorship();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"backstory\":\n\t\t\t\t\tpanelInner = self.buildBackstory();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"imagery\":\n\t\t\t\t\tpanelInner = self.buildImagery();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"links\":\n\t\t\t\t\t// panelInner = buildLinks(self, data);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tconst panelTile = strings[cornerKey];\n\t\t\tlet panelClass = `fc-panel fc-${cornerKey}`;\n\t\t\n\t\t\tconst panelHTML =\n\t\t\t\t`<div data-fc-key=\"${cornerKey}\" class=\"${panelClass}\">\n\t\t\t\t\t<div class=\"fc-panel-title\">\n\t\t\t\t\t\t<span>${panelTile}</span>\n\t\t\t\t\t\t<div class=\"fc-icon fc-expand\" title=\"Expand this panel\"></div>\n\t\t\t\t\t\t<div class=\"fc-icon fc-close\" title=\"Close this panel\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"fc-panel-title fc-pseudo\">\n\t\t\t\t\t\t<span>${CORNER_KEYS.indexOf(cornerKey)}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t${panelInner ?\n\t\t\t\t\t\t`<div class=\"fc-scroll\">\n\t\t\t\t\t\t\t<div class=\"fc-inner\">\n\t\t\t\t\t\t\t\t${panelInner}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>`\n\t\t\t\t\t: \"\"}\n\t\t\t\t</div>`;\n\t\t\telems.wrap.innerHTML += panelHTML;\n\n\t\t\tconst panel = self.getPanel(cornerKey);\n\n\t\t\tconst panelExpand = panel.querySelector(\".fc-expand\");\n\t\t\tpanelExpand.addEventListener(\"click\", () => {\n\t\t\t\tself.toggleExpandPanel();\n\t\t\t});\n\n\t\t\tconst panelClose = panel.querySelector(\".fc-close\");\n\t\t\tpanelClose.addEventListener(\"click\", () => {\n\t\t\t\tself.closePanel(cornerKey);\n\t\t\t\twrap.classList.remove(\"fc-full\");\n\t\t\t});\n\n\t\t\tpanels[cornerKey] = panel;\n\t\t});\n\t\treturn panels;\n\t}\n\n\tbuildAuthorship() {\n\t\tconst self = this,\n\t\t\t\t\t{ data } = this,\n\t\t\t\t\tpanelData = data.authorship;\n\n\t\tlet html, innerHtml = \"\";\n\t\tinnerHtml +=\n\t\t\tpanelData.caption ? \n\t\t\t`<div class=\"fc-field\">\n\t\t\t\t<em>${panelData.caption}</em>\n\t\t\t</div>` : \"\";\n\n\t\tconst creditHtml = [];\n\t\tconst hasCopyright = panelData.license.type === \"copyright\";\n\n\t\tif(panelData.licenseYear) {\n\t\t\tcreditHtml.push(`<span>${panelData.license.year}</span>`);\n\t\t}\n\n\t\tif(panelData.credit) {\n\t\t\tcreditHtml.push(`<span>${panelData.credit}${panelData.license.holder ? `/${panelData.license.holder}` : \"\"}</span>`);\n\t\t}\n\n\t\tinnerHtml +=\n\t\t\thasCopyright || panelData.credit ?\n\t\t\t\t`<div class=\"fc-field\" data-fc-field=\"credit\">\n\t\t\t\t\t<div class=\"fc-content\">\n\t\t\t\t\t\t${hasCopyright ?\n\t\t\t\t\t\t\t`<div class=\"fc-copyright\">\n\t\t\t\t\t\t\t\t${creditHtml.join(\"\")}\n\t\t\t\t\t\t\t</div>`\n\t\t\t\t\t\t: `<div>${panelData.credit}</div>`}\n\t\t\t\t\t</div>\n\t\t\t\t</div>` : \"\";\n\n\t\tinnerHtml +=\n\t\t\tpanelData.license &&\n\t\t\tpanelData.license.label &&\n\t\t\tpanelData.license.type === \"commons\" ?\n\t\t\t\t`<div class=\"fc-field\" data-fc-field=\"license\">\n\t\t\t\t\t<span class=\"fc-label\">${self.strings.license}</span>\n\t\t\t\t\t<span class=\"fc-content\">\n\t\t\t\t\t\t${panelData.license.url ?\n\t\t\t\t\t\t`<a href=\"${panelData.license.url}\" target=\"_blank\">\n\t\t\t\t\t\t\t${panelData.license.label ? panelData.license.label : \"\"}\n\t\t\t\t\t\t</a>`\n\t\t\t\t\t\t: panelData.license.label ? panelData.license.label : \"\"}\n\t\t\t\t\t</span>\n\t\t\t\t</div>` : \"\";\n\t\t\t\t\n\t\tinnerHtml +=\n\t\t\tpanelData.ethics &&\n\t\t\tpanelData.ethics.desc ?\n\t\t\t\t`<div class=\"fc-field\" data-fc-field=\"ethics\">\n\t\t\t\t\t<span class=\"fc-label\">${self.strings.coe}</span>\n\t\t\t\t\t<span class=\"fc-content\">${panelData.ethics.desc}</span>\n\t\t\t\t</div>` : \"\";\n\t\t\n\t\tinnerHtml +=\n\t\t\tpanelData.bio ?\n\t\t\t`<div class=\"fc-field\">\n\t\t\t\t<span class=\"fc-label\">${self.strings.bio}</span>\n\t\t\t\t${panelData.bio}\n\t\t\t</div>` : \"\";\n\n\n\t\tinnerHtml +=\n\t\t\tpanelData.website || panelData.contact.info || panelData.contact.rights ?\n\t\t\t`<div class=\"fc-field fc-contact\">\n\n\t\t\t\t${panelData.website ?\n\t\t\t\t`<div class=\"fc-field fc-card\">\n\t\t\t\t\t<div class=\"fc-label\">${self.strings.website}</div>\n\t\t\t\t\t${this.createLink(panelData.website)}\n\t\t\t\t</div>`: \"\"}\n\n\t\t\t\t${panelData.contactInfo ?\n\t\t\t\t`<div class=\"fc-field fc-card\">\n\t\t\t\t\t<div class=\"fc-label\">${self.strings.info}</div>\n\t\t\t\t\t${this.createLink(panelData.contactInfo)}\n\t\t\t\t</div>`: \"\"}\n\n\t\t\t\t${panelData.contactRights ?\n\t\t\t\t`<div class=\"fc-field fc-card\">\n\t\t\t\t\t<div class=\"fc-label\">${self.strings.rights}</div>\n\t\t\t\t\t${this.createLink(panelData.contactRights)}\n\t\t\t\t</div>` : \"\"}\n\n\t\t\t</div>` : \"\";\n\n\t\tif(innerHtml.length) {\n\t\t\thtml = `<div class=\"fc-row\">${innerHtml}</div>`;\n\t\t}\n\t\treturn html;\n\t}\n\n\tbuildBackstory() {\n\t\tconst self = this,\n\t\t\t\t\t{ data } = this,\n\t\t\t\t\tpanelData = data.backstory;\n\n\t\tlet html = \n\t\t\t`${panelData.text ?\n\t\t\t`<div class=\"fc-row\">\n\t\t\t\t${this.wrapParagraphs(panelData.text)}\n\t\t\t</div>`: \"\"}\n\t\t\t${panelData.media && panelData.media.map((obj, i) => {\n\t\t\t\tthis.wrapExternal(self, obj, \"backstory\", i);\n\t\t\t\treturn (\n\t\t\t\t\t`<div class=\"fc-row\">\n\t\t\t\t\t\t<div class=\"fc-media\" data-fc-source=\"${obj.source}\"></div>\n\t\t\t\t\t\t${obj.caption ? `<div class=\"fc-sub-caption\">${obj.caption}</div>` : \"\"}\n\t\t\t\t\t\t${obj.credit ? `<div class=\"fc-sub-credit\">${obj.credit}</div>` : \"\"}\n\t\t\t\t\t</div>`\n\t\t\t\t)\n\t\t\t}).join(\"\")}`;\n\n\t\treturn html;\n\t}\n\n\tbuildImagery() {\n\t\tconst self = this,\n\t\t\t\t\t{ data, elems } = this,\n\t\t\t\t\t{ wrap } = elems,\n\t\t\t\t\tpanelData = data.imagery;\n\n\t\tlet html = \n\t\t\t`${panelData.media && panelData.media.map((obj, i) => {\n\t\t\t\tconst isExternal = [\"selfagram\", \"youtube\", \"vimeo\"].includes(obj.source);\n\t\t\t\treturn (\n\t\t\t\t\t`<div class=\"fc-row\">\n\t\t\t\t\t\t<div class=\"fc-media\" data-fc-source=\"${obj.source}\">\n\t\t\t\t\t\t\t${self.buildMedia(obj.source, obj.url)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t${obj.caption ? `<div class=\"fc-sub-caption\">${obj.caption}</div>` : \"\"}\n\t\t\t\t\t\t${obj.credit ? `<div class=\"fc-sub-credit\">${obj.credit}</div>` : \"\"}\n\t\t\t\t\t\t${isExternal ?\n\t\t\t\t\t\t\t`<div class=\"fc-sub-credit\">\n\t\t\t\t\t\t\t\t${isExternal && obj.url ?\n\t\t\t\t\t\t\t\t\t`<a href=\"${obj.url}\" target=\"_blank\">\n\t\t\t\t\t\t\t\t\t\tView on ${self.extractRootDomain(obj.url)}\n\t\t\t\t\t\t\t\t\t</a>`\n\t\t\t\t\t\t\t\t: \"\"}\n\t\t\t\t\t\t\t\t${isExternal && !obj.url ?\n\t\t\t\t\t\t\t\t\t`View on ${self.extractRootDomain(obj.url)}`\n\t\t\t\t\t\t\t\t: \"\"}\n\t\t\t\t\t\t\t</div>`\n\t\t\t\t\t\t: \"\"}\n\t\t\t\t\t</div>`\n\t\t\t\t)\n\t\t\t}).join(\"\")}`;\n\t\treturn html;\n\t}\n\n\tbuildMedia(source, url) {\n\t\tif(source === \"image\") {\n\t\t\t// const pseudoImg = new Image();\n\n\t\t\t(async () => {\n\t\t\t  const img = new Promise((resolve, reject) => {\n\t\t\t    const pseudoImg = new Image();\n\t\t\t    pseudoImg.onload = () => resolve(pseudoImg);\n\t\t\t    pseudoImg.onerror = reject;\n\t\t\t    pseudoImg.src = url;\n\t\t\t  });\n\n\t\t\t  console.log(img);\n\t\t\t})();\n\n\t\t\t\n\t\t  \n\n\t\t\t// pseudoImg.onload = (e) => {\n\t\t\t// \tconst img = `<img src=\"${obj.url}\"/>`;\n\t\t\t// \tconst panel = self.elems.panels[panelKey];\n\t\t\t// }\n\t\t\t// pseudoImg.src = obj.url;\n\t\t}\n\t}\n\n\t// const buildLinks = (self, data) => {\n\t// \tif(!data.links){\n\t// \t\treturn\n\t// \t}\n\t// \tlet html = data.links.map(obj => {\n\t// \t\tif(!obj || !obj.url){\n\t// \t\t\treturn null\n\t// \t\t}\n\t// \t\tlet rootUrl = extractRootDomain(obj.url);\n\t// \t\tlet text = obj.url ?\n\t// \t\t\t`${obj.title?obj.title:rootUrl}\n\t// \t\t\t<div class=\"fc-sub-url\">${rootUrl}</div>` : \"\";\n\t// \t\treturn `<div class=\"fc-row\">${createLink(obj.url, text, [\"fc-card\"])}</div>`\n\t// \t}).join(\"\");\n\t// \treturn html;\n\t// }\n\n\t// addPhoto() {\n\t// \tlet photo, img,\n\t// \t\t\tself = this,\n\t// \t\t\twrap = this.elems.wrap,\n\t// \t\t\twidth = this.photo ? this.photo.width : \"\",\n\t// \t\t\theight = this.photo ? this.photo.height : \"\",\n\t// \t\t\tratio = width/height,\n\t// \t\t\timgSelector = \".fc-img\";\n\n\t// \twrap.style.paddingBottom = 100/ratio+\"%\";\n\t// \timg = wrap.querySelector(imgSelector);\n\t// \tif(!img) {\n\t// \t\twrap.classList.add(\"fc-empty\");\n\t// \t}\n\n\t// \tlet pseudoImg = new Image;\n\t// \twrap.classList.add(\"fc-loading\");\n\n\t// \tpseudoImg.onload = (e) => {\n\t// \t\twrap.style.paddingBottom = \"\";\n\t// \t\twrap.classList.remove(\"fc-loading\");\n\t// \t\twrap.dispatchEvent(self.onImgLoad);\n\t// \t}\n\t// \tpseudoImg.onerror = (e) => {\n\t// \t\twrap.classList.remove(\"fc-loading\");\n\t// \t\twrap.classList.add(\"fc-empty\");\n\t// \t\twrap.dispatchEvent(self.onImgFail);\n\t// \t}\n\t// \tpseudoImg.src = img ? img.src : \"\";\n\n\t// \treturn img;\n\t// }\n\n\t// addCutline() {\n\t// \tconst content = this.content.authorship;\n\t// \tif(!content&&!this.opts.caption&&!this.opts.credit&&!this.opts.logo) {return}\n\t// \tconst data = this.content[\"authorship\"];\n\t// \tif(!data) {return}\n\t// \tconst wrap = this.elems.wrap;\n\t// \tconst caption = this.opts.caption && content.caption ? `<span class=\"fc-caption\">${content.caption}</span>`: \"\";\n\t// \tconst credit = this.opts.credit && (content.credit||content.license.holder) ?\n\t// \t\t`<div class=\"fc-credit\">\n\t// \t\t\t${(content.credit ? `<span>${content.credit}</span>` : \"\")+(content.license.holder ? `<span>${content.license.holder}</span>` : \"\")}\n\t// \t\t</div>`\n\t// \t: \"\";\n\t// \tconst logo = this.opts.logo ? `<a href=\"https://fourcornersproject.org\" target=\"_blank\" class=\"fc-logo\" title=\"This is a Four Corners photo\"></a>`: \"\";\n\t// \tconst cutline =\n\t// \t\t`<div class=\"fc-cutline\">\n\t// \t\t\t${caption+credit+logo}\n\t// \t\t</div>`;\n\t// \twrap.insertAdjacentHTML(\"afterend\", cutline);\n\t// \treturn cutline;\n\t// }\n\n\t// wrapMedia() {\n\t// \tconst self = this,\n\t// \t\t\t\timageryContent = this.content.imagery;\n\t// \tif(!imageryContent) {return}\n\t// \tconst media = imageryContent.media;\n\t// \tif(!media) {return}\n\t// \tconst mediaKeys = Object.keys(media);\n\t// \tmediaKeys.forEach(function(key, i) {\n\t// \t\tconst obj = media[key];\n\t// \t\tif(obj.source == \"image\" || !obj.source) {\n\t// \t\t\twrapImage(self, obj, \"imagery\", i);\n\t// \t\t} else {\n\t// \t\t\twrapExternal(self, obj, \"imagery\", i);\n\t// \t\t}\n\t// \t});\n\t// }\n\n\t// resizeModule(e) {\n\t// \tconst panels = this.getPanel();\n\t// \tif(!panels){return}\n\t// \tObject.keys(panels).forEach(function(cornerKey, i) {\n\t// \t\tresizePanel(panels[cornerKey]);\n\t// \t});\n\t// }\n\n\n\t// const getPhoto = (self, data) => {\n\t// \tif(data && data.photo && data.photo.src) {\n\t// \t\treturn data.photo;\n\t// \t}\n\t// \tconst img = self.elems.wrap ? self.elems.wrap.querySelector(\"img\") : \"\",\n\t// \t\t\t\timgSrc = img ? img.src : \"\";\n\t// \treturn {\n\t// \t\tsrc: imgSrc\n\t// \t}\n\t// }\n\n\t// const resizePanel = (panel) => {\n\t// \tif(typeof panel.querySelector!==\"function\"){return}\n\t// \tconst panelScroll = panel.querySelector(\".fc-scroll\");\n\t// \tif(!panelScroll){return}\n\t// \tif( panelScroll.scrollHeight > panelScroll.clientHeight ) {\n\t// \t\tpanel.classList.add(\"fc-overflow\");\n\t// \t} else {\n\t// \t\tpanel.classList.remove(\"fc-overflow\");\n\t// \t}\n\t// }\n\n\t// const createRow = (data, obj, includeLabel) => {\n\t// \tconst label = includeLabel ? `<div class=\"fc-label\">${obj.label}</div>` : \"\";\n\t// \tconst content = data[obj.prop];\n\t// \treturn data[obj.prop] ?\n\t// \t\t`<div class=\"fc-row\">\n\t// \t\t\t${label}\n\t// \t\t\t${content}\n\t// \t\t</div>` : \"\";\n\t// }\n\n\n\n\t\n\n\t\n\n\n\t// const wrapImage = (self, obj, panelKey, index) => {\n\t// \tif(!obj.url){ return }\n\t// \tconst pseudoImg = new Image();\n\t// \tpseudoImg.onload = (e) => {\n\t// \t\tconst img = `<img src=\"${obj.url}\"/>`;\n\t// \t\tconst panel = self.elems.panels[panelKey];\n\t// \t\tlet media = panel.querySelectorAll(\".fc-media\")[index];\n\t// \t\tmedia.innerHTML += img;\n\t// \t}\n\t// \tpseudoImg.src = obj.url;\n\t// \treturn;\n\t// }\n\n\twrapExternal(self, obj, panelKey, index) {\n\t\t//requests third party APIs to retrieve wrap data\n\t\tlet req = \"\";\n\t\tswitch(obj.source) {\n\t\t\tcase \"youtube\":\n\t\t\t\treq = \"https://nowrap.com/wrap?url=\"+obj.url;\n\t\t\t\tbreak;\n\t\t\tcase \"vimeo\":\n\t\t\t\treq = \"https://vimeo.com/api/owrap.json?url=\"+obj.url;\n\t\t\t\tbreak;\n\t\t\tcase \"soundcloud\":\n\t\t\t\treq = \"https://soundcloud.com/owrap?format=json&url=\"+obj.url;\n\t\t\t\tbreak;\n\t\t\tcase \"selfagram\":\n\t\t\t\treq = \"https://api.selfagram.com/owrap/?url=\"+obj.url;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn false;\n\t\t\t\tbreak;\n\t\t}\n\t\tconst headers = new Headers();\n\t\tfetch(req, {\n\t\t\t\tmethod: \"GET\",\n\t\t\t\theaders: headers\n\t\t\t})\n\t\t\t.then(res => {\n\t\t\t\tif (!res.ok) {throw Error(res.statusText)}\n\t\t\t\treturn res.json();\n\t\t\t})\n\t\t\t.then(res => {\n\t\t\t\tconst panel = self.elems.panels[panelKey];\n\t\t\t\tlet subMedia = panel.querySelectorAll(\".fc-media\")[index],\n\t\t\t\t\t\thtml = \"\";\n\t\t\t\tif(obj.source == \"selfagram\") {\n\t\t\t\t\thtml = `<img src=\"${res.thumbnail_url}\"/>`;\n\t\t\t\t} else {\n\t\t\t\t\thtml = res.html;\n\t\t\t\t}\n\n\t\t\t\tif(Number.isInteger(res.width, res.height)) {\n\t\t\t\t\tconst ratio = res.height/res.width;\n\t\t\t\t\tsubMedia.classList.add(\"fc-responsive\")\n\t\t\t\t\tsubMedia.style.paddingBottom = (ratio*100)+\"%\";\n\t\t\t\t}\n\t\t\t\tsubMedia.innerHTML = html;\n\t\t\t})\n\t\t\t.catch(function(err) {\n\t\t\t\tconsole.warn(\"Four Corners cannot load this media source: \"+obj.url, err);\n\t\t\t});\n\t}\n\n\t// const parseData = (self) => {\n\t// \tif(!self.elems||!self.elems.wrap) {return}\n\t// \tconst wrap = self.elems.wrap,\n\t// \t\t\t\tscriptTag = wrap.querySelector(\"script\");\n\t// \tlet stringData;\n\t// \tif(scriptTag) {\n\t// \t\t//If wrap JSON is stored in child script tag (NEW)\n\t// \t\tstringData = scriptTag.innerHTML;\n\t// \t\tscriptTag.remove();\n\t// \t} else if(wrap.hasAttribute(\"data-fc\")) {\n\t// \t\t//If wrap JSON is stored in data-fc attributte (OLD)\n\t// \t\tstringData = wrap.dataset.fc;\n\t// \t\tdelete wrap.dataset.fc;\n\t// \t}\n\t// \tif(!stringData){\n\t// \t\treturn\n\t// \t}\n\t// \treturn JSON.parse(stringData);\n\t// }\n\n\t// const isChildOf = (target, ref) => {\n\t// \tlet answer = false;\n\t// \tObject.entries(ref).forEach(([key, elem]) => {\n\t// \t\tif(elem&&elem.contains&&elem.contains(target)) {\n\t// \t\t\tanswer = true;\n\t// \t\t}\n\t// \t});\n\t// \treturn answer;\n\t// }\n\n\twrapParagraphs(val) {\n\t\tlet array = val.split(/\\n/g);\n\t\tlet text = [];\n\t\tlet html = \n\t\t\tarray ?\n\t\t\t`${array.map((str,i) => {\n\t\t\t\treturn str ? `<p>${str}</p>` : `<br/>`\n\t\t\t}).join(\"\")}`\n\t\t\t: \"\";\n\t\treturn html;\n\t}\n\n\tcreateLink(href, text, classes = []) {\n\t\tif(!text) {\n\t\t\ttext = this.extractRootDomain(href);\n\t\t}\n\t\t//Needs better validatoor \n\t\tif(href.indexOf(\"@\") > -1) {\n\t\t\thref = `mailto:${href}`;\n\t\t}\n\t\treturn `<a href=\"${href}\" target=\"_blank\" class=\"${classes.join(\" \")}\">${text}</a>`;\n\t}\n\n\textractHostname(url) {\n\t\tlet hostname;\n\t\tif(!url) return null;\n\t\tif(url.indexOf(\"//\") > -1) {\n\t\t\thostname = url.split(\"/\")[2];\n\t\t} else {\n\t\t\thostname = url.split(\"/\")[0];\n\t\t}\n\t\thostname = hostname.split(\":\")[0];\n\t\thostname = hostname.split(\"?\")[0];\n\t\treturn hostname;\n\t}\n\n\textractRootDomain(url) {\n\t\tif(!url) return null;\n\t\tlet domain = this.extractHostname(url);\n\t\tlet splitArr = domain.split(\".\");\n\t\tlet arrLen = splitArr.length;\n\t\tif (arrLen > 2) {\n\t\t\tdomain = splitArr[arrLen - 2] + \".\" + splitArr[arrLen - 1];\n\t\t\tif (splitArr[arrLen - 2].length == 2 && splitArr[arrLen - 1].length == 2) {\n\t\t\t\tdomain = splitArr[arrLen - 3] + \".\" + domain;\n\t\t\t}\n\t\t}\n\t\treturn domain;\n\t}\n\n\t// const hasField = (data, fieldKey, subFieldKey) => {\n\t// \tif(!data){return false}\n\t// \tif(!data[fieldKey]){return false}\n\t// \tif(typeof data[fieldKey] == \"object\") {\n\t// \t\tif(!Object.keys(data[fieldKey]).length){return false}\t\n\t// \t} else {\n\t// \t\tif(!data[fieldKey].length){return false}\t\n\t// \t}\n\t// \tif(!subFieldKey||!data[fieldKey][subFieldKey]){return false}\n\t// \tif(typeof data[fieldKey][subFieldKey] == \"object\") {\n\t// \t\tif(!Object.keys(data[fieldKey][subFieldKey]).length){return false}\t\n\t// \t} else {\n\t// \t\tif(!data[fieldKey][subFieldKey].length){return false}\t\n\t// \t}\n\t// \treturn true;\n\t// }\n}\n\nconst CORNER_KEYS = [\n\t\"authorship\",\n\t\"backstory\",\n\t\"imagery\",\n\t\"links\"\n];\n\nconst STRINGS = {\n\ten: {\n\t\tauthorship: \"Authorship\",\n\t\tbackstory: \"Backstory\",\n\t\timagery: \"Related Imagery\",\n\t\tlinks: \"Links\",\n\t\tlicense: \"License\",\n\t\tcoe: \"Code of ethics\",\n\t\tbio: \"Bio\",\n\t\twebsite: \"Website\",\n\t\tinfo: \"For more info\",\n\t\trights: \"For reproduction rights\",\n\t},\n\tar: {\n\t\tauthorship: \"التأليف\",\n\t\tbackstory: \"القصة وراء الصورة \",\n\t\timagery: \"الصور ذات الصلة\",\n\t\tlinks: \"الروابط\",\n\t\tlicense: \"الترخيص\",\n\t\tcoe: \"ميثاق أخلاقيات\",\n\t\tbio: \"السيرة الذاتية\",\n\t\twebsite: \"الموقع الكتروني\",\n\t\tinfo: \"لمزيد من المعلومات\",\n\t\trights: \"للحصول على حقوق النسخ\",\n\t}\n}\n\nconst DEFAULT_OPTS = {\n\tselector: \"img\",\n\tstatic: false,\n\tcaption: false,\n\tcredit: false,\n\tlogo: false,\n\tactive: \"\",\n};\n\nmodule.exports = FourCorners;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(579);\n",""],"names":["FourCorners","img","provenance","opts","c2paData","getC2paData","data","parseData","strings","STRINGS","Object","assign","DEFAULT_OPTS","elems","wrap","addWrap","panels","addPanels","corners","addCorners","key","value","searchKeys","obj","keys","forEach","k","claims","claim","assertions","get","parseArray","arr","map","newObj","i","splitArr","replace","split","newKey","length","toLowerCase","getValue","document","createElement","parentNode","insertBefore","appendChild","classList","add","cornerKey","querySelector","self","corner","panel","getPanel","remove","setAttribute","CORNER_KEYS","closePanel","e","cornerElem","target","getAttribute","activeKey","openPanel","cornerTitle","propKey","title","cornerIsEmpty","hasOwnProperty","addEventListener","hoverCorner","bind","unhoverCorner","clickCorner","console","log","panelData","panelInner","buildAuthorship","buildBackstory","buildImagery","panelTile","panelClass","panelHTML","indexOf","innerHTML","panelExpand","toggleExpandPanel","panelClose","authorship","html","innerHtml","caption","creditHtml","hasCopyright","license","type","licenseYear","push","year","credit","holder","join","label","url","ethics","desc","coe","bio","website","contact","info","rights","createLink","contactInfo","contactRights","backstory","text","wrapParagraphs","media","wrapExternal","source","imagery","isExternal","includes","buildMedia","extractRootDomain","Promise","resolve","reject","pseudoImg","Image","onload","onerror","src","panelKey","index","req","headers","Headers","fetch","method","then","res","ok","Error","statusText","json","subMedia","querySelectorAll","thumbnail_url","Number","isInteger","width","height","ratio","style","paddingBottom","err","warn","val","array","str","href","classes","hostname","domain","extractHostname","arrLen","en","links","ar","selector","logo","active","module","exports"],"sourceRoot":""}